language: java
jdk: oraclejdk7
env:
  matrix:
  - ANDROID_SDKS=android-18,sysimg-18 ANDROID_TARGET=android-18  ANDROID_ABI=armeabi-v7a
before_install:
- sudo apt-get update -qq
- if [ `uname -m` = x86_64 ]; then sudo apt-get install -qq --force-yes libgd2-xpm
  ia32-libs ia32-libs-multiarch > /dev/null; fi
- wget http://dl.google.com/android/android-sdk_r22.0.5-linux.tgz
- tar xzf android-sdk_r22.0.5-linux.tgz
- export ANDROID_HOME=$PWD/android-sdk-linux
- export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools
- wget https://dl-ssl.google.com/android/repository/build-tools_r18.0.1-linux.zip
- unzip build-tools_r18.0.1-linux.zip -d $ANDROID_HOME
- mkdir -p $ANDROID_HOME/build-tools/
- mv $ANDROID_HOME/android-4.3 $ANDROID_HOME/build-tools/18.0.1
- echo yes | android update sdk --filter platform-tools --no-ui --force > /dev/null
- echo yes | android update sdk --filter android-18 --no-ui --force > /dev/null
- echo yes | android update sdk --filter sysimg-18 --no-ui --force > /dev/null
- echo yes | android update sdk --filter extra-android-support --no-ui --force > /dev/null
- echo yes | android update sdk --filter extra-android-m2repository --no-ui --force
  > /dev/null
- echo yes | android update sdk --filter add-on --no-ui --force > /dev/null
script: "./gradlew uploadArchives"
deploy:
  provider: s3
  access_key_id: AKIAJAY4BOTQTNCL7PVQ
  secret_access_key:
    secure: lgnjLrznaBd8ma2WPQ1xZbc2G3lypcE9ZAR0xn1BMfDBEKGq8JAZ6b2HA2FmYXA9h/0cXtzReIxrU2H09+3FL8823yojWMFGeQGeQ/gxIJCVJ6f+V+J8Sje6AMVBSRvpJSTBgWIAxkwkd3OlrCJRT8cXX0S9zrN1gC7KtJMG2/Q=
  bucket: artoo-mvn-repo
  skip_cleanup: true
  upload-dir: snapshots
  local-dir: mvn
  on:
    all_branches: true
notifications:
  flowdock:
    secure: ne6C/OZJaFT0IWbaR8vrDhc3yVWt67iKNNe6Ahb3uPEzLuyAsJSJePgQ4U2Vk+3exGJ60pFYxNrI++E7jPKoaNnXoXgbGvNkM4lgL7IN10KUL5zKW8B5L1ahvKGBGbZNEbEFXgIuuaIOo+1mfCf1wUOhbecbTfePAmiLL3C5iOI=
